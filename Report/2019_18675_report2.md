# 2019-18675 김준영 Report2.md

## (1) Declaration [In Logger.h]
 *  void _2019_18675_task_read_write_logger(std::string, std::string);
 *  std::string _2019_18675_log_prepare_Tagged_Data(std::shared_ptr<TaggedData>);
 *  std::string _2019_18675_log_prepare_Delayed_Data(std::shared_ptr<DelayedData>);

## (2) IDEA
 * Engine/Job.cpp의 void Job::run_function()에서 get_is_read, get_is_write 함수를 통해 read/write constraint를 확인하는 모습을 보고, 이 부근에서 Tagged_Read, Delayed_Write가 발생할 것으로 단서를 얻었다. 실제로, 그 부근에 tagged_data_read, delayed_data 등에 접근하는 것을 확인하여, 이 곳에서 logger function을 호출하면 될 것으로 생각했다.
 * Log에 포함될 정보는 parameter로 받도록 설정했다(http://etl.snu.ac.kr/mod/ubboard/article.php?id=1600010&bwid=2759172로부터 허용됨.)
 * 

## (3) LK의 period를 최소화하는 것이 최우선이라고 생각하여, LK의 period를 40, execution time을 20으로 설정하였다(utilization 50). 그러나, 너무 잦은 작동으로 인해서 차체가 진동을 거듭하며 불안정한 상태로 빠져 벽에 충돌하는 경우가 있어, period를 60, execution time을 30으로 완화하고, LK.cpp 파일에서 steering을 업데이트하는 값을 8000.0으로 수정하여, 진동이 일어나는 경우를 줄이고자 하였다.

## (4) LK를 제외한 ECU0의 나머지 task인 CC와 LOCAL은 각각 period와 execution time을 120과 30으로 설정했다(utilization 25). 다른 값으로도 몇번 설정해보았으나, 큰 의미를 갖지 않거나, DEADLINE MISS가 발생하여 이와 같이 적절히 설정하였다. (기본적으로는 Hyperperiod 120에 대해서, ECU0 task들의 utilization 합이 100이 되도록 설정한 것이다.) 

## (5) ECU1의 task들은 모두 period, execution time을 200, 40으로 설정하였다(utilization 20). 이렇게 설정한 데에 큰 이유는 없으나, 테스트를 진행한 다른 값들보다 더 좋은 performance를 보여주었다.

## (6) 위 parameter 들의 설정은 CC.cpp의 기준 속도를 기존 40km/h(read2 = read2/100 - 400000)에서 높여가면서 Lab1의 정상 주행이 유지되는 여부를 확인해가면서 점진적으로 조정하는 과정을 거쳤는데, 결과적으로 130km/h까지 높여도 Lab1의 주행시간을 48:83정도로 보여주는 등 정상 주행이 가능했지만, 진동 등으로 인해 안정성이 떨어지는 것 같아서, 125km/h를 최종 기준 속도로 설정하였다. (read2 = read2 / 100 + 450000).

## (7) 그 결과, Lab1의 결과 약 00:50:80의 Lab time을 보여주는 것으로 확인되었다.